<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Plumber.js demo</title>
  <link rel="stylesheet" href="./master.css" type="text/css" media="screen" title="no title" charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
</head>
  <body>
    <a href="https://github.com/ismasan/plumber_demo"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>
    
    <div class="demo">
      This is a demo for <a href="https://github.com/ismasan/plumber.js" target="_blank">Plumber.js</a> (work in progress). 
      
      <button data-behaviour="toggleStream">Run stream</button>
      
    </div>
    <div id="wrapper" class="clearfix">
      
      <div class="col" id="all">
        <h3>All events</h3>
        <table class="list">
          <thead>
            <tr>
              <th>date</th>
              <th>app</th>
              <th>account</th>
              <th>type</th>
              <th>user</th>
            </tr>
          </thead>
          <tbody data-item>
            <tr>
              <td data-text="item.date"></td>
              <td data-text="item.app"></td>
              <td data-text="item.account"></td>
              <td class="event_type"><span data-text="item.type" data-class="item.type"></span></td>
              <td data-text="item.user"></td>
            </tr>
          </tbody>
        </table>

      </div><!-- /col 1 -->

      <div class="col">

        <h3>Pageviews</h3>

        <div id="counter1">
          <table class="chart">
            <tr data-item>
              <td valign="bottom"><span data-height="item.count"></span></td>
            </tr>
          </table>
        </div>

        <table class="list" id="filter1">
          <thead>
            <tr>
              <th>date</th>
              <th>app</th>
              <th>account</th>
              <th>type</th>
              <th>user</th>
            </tr>
          </thead>
          <tbody data-item>
            <tr>
              <td data-text="item.date"></td>
              <td data-text="item.app"></td>
              <td data-text="item.account"></td>
              <td class="event_type"><span data-text="item.type" data-class="item.type"></span></td>
              <td data-text="item.user"></td>
            </tr>
          </tbody>
        </table>

        <h3>Orders</h3>

        <div id="counter2">
          <table class="chart">
            <tr data-item>
              <td valign="bottom"><span data-height="item.count"></span></td>
            </tr>
          </table>
        </div>

        <table class="list" id="filter2">
          <thead>
            <tr>
              <th>date</th>
              <th>app</th>
              <th>account</th>
              <th>type</th>
              <th>user</th>
            </tr>
          </thead>
          <tbody data-item>
            <tr>
              <td data-text="item.date"></td>
              <td data-text="item.app"></td>
              <td data-text="item.account"></td>
              <td class="event_type"><span data-text="item.type" data-class="item.type"></span></td>
              <td data-text="item.user"></td>
            </tr>
          </tbody>
        </table>  

      </div><!-- /col 2 -->

      <div class="col">
        <h3>Totals</h3>
        <div id="pie" data-diameter="300"></div>

        <table id="totals" class="event_type">
          <tbody data-item>
            <tr>
              <th class="pageview">pageview</th>
              <td data-text="item.pageview"></td>
            </tr>
            <tr>
              <th class="order">order</th>
              <td data-text="item.order"></td>
            </tr>
            <tr>
              <th class="login">login</th>
              <td data-text="item.login"></td>
            </tr>
            <tr>
              <th class="request">request</th>
              <td data-text="item.request"></td>
            </tr>
            <tr>
              <th class="product">product</th>
              <td data-text="item.product"></td>
            </tr>
          </tbody>
        </table>
      </div><!-- /col 3 -->
      
    </div><!-- /wrapper -->
    
    <!-- script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script -->
    <script src="./jquery.min.js"></script>
    <script src="./jquery.peity.min.js"></script>
    <script type="text/javascript" src="./plumber.min.js"></script>
    <script type="text/javascript" src="./plumber.devices.min.js"></script>
    <script type="text/javascript" src="./plumber.view.min.js"></script>
    <script type="text/javascript" src="./mock_stream.js"></script>
    <script type="text/javascript" src="./app.js"></script> 
    
    <script type="text/javascript" charset="utf-8">
      $('button[data-behaviour=toggleStream]').click(function () {
        var button = $(this);
        
        if(stream.running) {
          stream.stop()
          button.text('Run stream')
        } else {
          stream.run(10)
          button.text('Stop stream')
        }
      }).click()
    </script>
  </body>
</html>